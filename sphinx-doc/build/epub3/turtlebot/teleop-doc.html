<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Keyboard Teleop</title>
    
    <link rel="stylesheet" href="../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" /> 
  </head>
  <body role="document">

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="speech-doc.html" title="Turtlebot Voice Teleoperation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="turtlebot-simulators.html" title="Turtlebot Simulators"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Gaitech EDU 2.5 documentation</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="turtlebot-tutorials.html" accesskey="U">Turtlebot Quick Start Tutorials</a> &raquo;</li> 
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="keyboard-teleop">
<span id="teleop-doc"></span><h1>Keyboard Teleop</h1>
<p>This tutorial will introduce to you how to control your turtlebot robot using ssh or across the wireless communication with your keyboard.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure that you completed installing all the required packets in the previous tutorials and your network is working fine between the ROS Master node and the Host node.</p>
</div>
<p>On the Master node (the turtulebot PC) run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>roslaunch turtlebot_bringup minimal.launch
</pre></div>
</div>
<p>On your workspace PC (the host node) run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>roslaunch turtlebot_teleop keyboard_teleop.launch
</pre></div>
</div>
<p>You can move your turtlebot robot according to the instructions below:</p>
<img alt="../_images/teleop_img.png" class="align-center" src="../_images/teleop_img.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure that your turtlebot robot is on a flat surface and on a safe distance from an edge.</p>
</div>
<div class="section" id="code-explanation">
<h2>Code Explanation</h2>
<p>The source code of the keyboard teleop could be found in <code class="docutils literal"><span class="pre">src/tutlebot/keyboard_teleop</span></code> folder of the <code class="docutils literal"><span class="pre">gaitech_doc</span></code> package.
Note that by default the keyboard teleop application is in the folder <code class="docutils literal"><span class="pre">/opt/ros/indigo/share/turtlebot_teleop</span></code> of the ROS distribution.
We explain the following script of the <code class="docutils literal"><span class="pre">keyboard_teleop.launch</span></code> file:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span> <span class="nt">&lt;launch&gt;</span>
  <span class="c">&lt;!-- turtlebot_teleop_key already has its own built in velocity smoother --&gt;</span>
   <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">&quot;turtlebot_teleop&quot;</span> <span class="na">type=</span><span class="s">&quot;turtlebot_teleop_key&quot;</span> <span class="na">name=</span><span class="s">&quot;turtlebot_teleop_keyboard&quot;</span>  <span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;scale_linear&quot;</span> <span class="na">value=</span><span class="s">&quot;0.5&quot;</span> <span class="na">type=</span><span class="s">&quot;double&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;scale_angular&quot;</span> <span class="na">value=</span><span class="s">&quot;1.5&quot;</span> <span class="na">type=</span><span class="s">&quot;double&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;turtlebot_teleop_keyboard/cmd_vel&quot;</span> <span class="na">to=</span><span class="s">&quot;cmd_vel_mux/input/teleop&quot;</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;/node&gt;</span>
<span class="nt">&lt;/launch&gt;</span>
</pre></div>
</div>
<p>The launch file runs the ROS node <code class="docutils literal"><span class="pre">turtlebot_teleop_key</span></code> of the package <code class="docutils literal"><span class="pre">turtlebot_teleop</span></code>.
Notice that the keyboard teleop node takes two parameters(<code class="docutils literal"><span class="pre">scale_linear</span></code> and <code class="docutils literal"><span class="pre">scale_angular</span></code>)
and they are used to determine the scale of the linear and angular speed of the turtlebot.
It is very important to keep the speed very small when you are testing.
However, you can change the speed value as much as you like, depending on the ground type.</p>
<p>The command <code class="docutils literal"><span class="pre">&lt;remap</span> <span class="pre">from=&quot;turtlebot_teleop_keyboard/cmd_vel&quot;</span> <span class="pre">to=&quot;cmd_vel_mux/input/teleop&quot;/&gt;</span></code> remap the topic of the velocity command to <code class="docutils literal"><span class="pre">cmd_vel_mux/input/teleop</span></code>, which is the topic that the turtlebot uses to receive velocity commands.
In fact, in the <code class="docutils literal"><span class="pre">turtlebot_teleop_key</span></code> the programmers used the topic <code class="docutils literal"><span class="pre">turtlebot_teleop_keyboard/cmd_vel</span></code> to publish velocity commands, but the turtlebot uses the <code class="docutils literal"><span class="pre">cmd_vel_mux/input/teleop</span></code> topic to receive velocity commands.
The <code class="docutils literal"><span class="pre">remap</span></code> command allows to change the definition of the <code class="docutils literal"><span class="pre">turtlebot_teleop_keyboard/cmd_vel</span></code> to the topic defined in the turtlebot robot.
Without the remap the keyboard teleopartion will not work as the topic used for publishing velocity commands will be different from the one used to receive them in the robot.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can either control a real turtlebot or a simulated turtlebot (in Stage or Gazebo) using the keyboard teleoperation.
If for some reason it does not work, make sure to correctly map the ROS topic over which the robot receives velocity commands.</p>
</div>
</div>
<div class="section" id="video-demonstration">
<h2>Video Demonstration</h2>
<p>You can watch an illustration of keyboard teleoperation of the turtlebot in this video</p>
<iframe width="640" height="360" src="http://www.youtube.com/embed/pjq-vThdWjw" frameborder="0" allowfullscreen="1">&nbsp;</iframe></div>
<div class="section" id="questions">
<h2>Questions</h2>
<ul class="simple">
<li>Read the code of <code class="docutils literal"><span class="pre">keyboad_teleop.cpp</span></code> and <code class="docutils literal"><span class="pre">keyboad_teleop.py</span></code>.  What is the topic used to publish velocity commands to the robot? What the line of code that does that?</li>
<li>What is the topic that the turtlebot uses to receive velocity commands? How can you find this information?</li>
<li>What is the technique used to link the topic of the velocity command published by the keyboard teleop node and the velocity command topic received by the robot?</li>
<li>What is the role of <code class="docutils literal"><span class="pre">scale_linear</span></code> and <code class="docutils literal"><span class="pre">scale_angular</span></code>. Explain.</li>
</ul>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>


    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Gaitech.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.1.
    </div>
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54522619-2', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>