

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Video Streaming with RapsberryPI Using mjpgStreamer &mdash; Gaitech EDU 2.5 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/gaitech32.jpg"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Gaitech EDU 2.5 documentation" href="../index.html"/>
        <link rel="up" title="Video Streaming Tutorials" href="index.html"/>
        <link rel="next" title="Dronemap Planner" href="../dronemap/index.html"/>
        <link rel="prev" title="Video Streaming with RapsberryPI Using gStreamer" href="video-streaming-gstreamer.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Gaitech EDU
          

          
            
            <img src="../_static/gaitechlogo150.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                2.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/get-started.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ros/ros-tutorials.html">ROS Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roslink/index.html">ROSLink</a></li>
<li class="toctree-l1"><a class="reference internal" href="../turtlebot/turtlebot-tutorials.html">Turtlebot Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../drones/index.html">Drones Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gapter/index.html">Gapter Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Video Streaming Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="video-streaming-vlc.html">Streaming with VLC</a></li>
<li class="toctree-l2"><a class="reference internal" href="video-streaming-gstreamer.html">Streaming with gStreamer</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Streaming with mjpgStreamer</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuring-your-raspberrypi">Configuring your RaspberryPi</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-mjpgstreamer">Getting mjpgStreamer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-mjpgstreamer-s-dependencies">Getting mjpgStreamer&#8217;s Dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#video-demonstration">Video Demonstration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#end-2">END 2</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dronemap/index.html">Dronemap Planner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributors/index.html">Contributors</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Gaitech EDU</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Video Streaming Tutorials</a> &raquo;</li>
      
    <li>Video Streaming with RapsberryPI Using mjpgStreamer</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/video/video-streaming-mjpgstreamer.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="video-streaming-with-rapsberrypi-using-mjpgstreamer">
<span id="video-streaming2"></span><h1>Video Streaming with RapsberryPI Using mjpgStreamer<a class="headerlink" href="#video-streaming-with-rapsberrypi-using-mjpgstreamer" title="Permalink to this headline">¶</a></h1>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>In this tutorial, you will:</dt>
<dd><ul class="first last simple">
<li>Learn how to configure your Raspberry Pi for video streaming through the mjpgStreamer Method</li>
<li>Know the commands needed for simple video streaming through mjpgStreamer</li>
<li>Acquire the dependencies needed for mjpgStreamer</li>
</ul>
</dd>
</dl>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<dl class="last docutils">
<dt>This demonstration was tested on:</dt>
<dd><ul class="first last simple">
<li>Google Chrome Version 56.0.2924.87 on a Windows 8.1 64-bit Computer</li>
<li>2017/1/11 Raspbian Jessi on a RBpi 2 Model B V1.1 using Pi Camera rev 1.3</li>
<li>Note: Pi Camera V2.1 was also tested successfully</li>
</ul>
</dd>
</dl>
</div>
<p>This tutorial will introduce to you to your Raspberry Pi Camera Module to view a video stream from your Pi setup, the server using Raspbian, to a different computer, a client using Windows, in your home network</p>
<img alt="../_images/raspberrypi2.jpg" class="align-center" src="../_images/raspberrypi2.jpg" />
<div class="section" id="configuring-your-raspberrypi">
<h2>Configuring your RaspberryPi<a class="headerlink" href="#configuring-your-raspberrypi" title="Permalink to this headline">¶</a></h2>
<p>Firstly, on your Pi&#8217;s terminal, Update and Upgrade the environment so it can be up to date. This helps in reducing future problems. Don&#8217;t forget to ENABLE your Raspberry Pi Camera using &#8216;raspi-config&#8217;.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo apt-get update
$ sudo apt-get upgrade
</pre></div>
</div>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo raspi-config
</pre></div>
</div>
<p>A blue BIOS-like screen will appear, go into the Enable Camera Options and enable the camera.</p>
<img alt="../_images/Blue1.png" class="align-center" src="../_images/Blue1.png" />
<img alt="../_images/Blue2.png" class="align-center" src="../_images/Blue2.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Depending on your version of Raspbian, the Enable setting may not first appear on the main list. You will have to go under the settings in the blue screen to locate the enable option.</p>
</div>
<p>It is also advised now to see what is the IP Address of your Pi.
Type in the following to locate the IP as you will need it in the Browser for your Windows machine.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ ifconfig
</pre></div>
</div>
<div class="line-block">
<div class="line">If you are using a wireless connection,</div>
<div class="line">the IP you want is located in the <code class="docutils literal"><span class="pre">lo</span></code> section under <code class="docutils literal"><span class="pre">inet</span> <span class="pre">addr:x.x.x.x</span></code></div>
<div class="line">If you are using ethernet,</div>
<div class="line">it will be under <code class="docutils literal"><span class="pre">eth0</span></code> in <code class="docutils literal"><span class="pre">inet</span> <span class="pre">addr:x.x.x.x</span></code></div>
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="getting-mjpgstreamer">
<h2>Getting mjpgStreamer<a class="headerlink" href="#getting-mjpgstreamer" title="Permalink to this headline">¶</a></h2>
<p>We will now install mjpgStreamer on our Pi, the main focus of this method
To do this, we will go to the <a class="reference external" href="https://lilnetwork.com/download/raspberrypi/mjpg-streamer.tar.gz">mjpgStreamer website</a>
which will automatically start the download.</p>
<p>We will need to decompress the file, this process will also install it at the same time.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ tar -zxvf mjpg-streamer.tar.gz
</pre></div>
</div>
<p>Press Enter, and you should see a new directory called <code class="docutils literal"><span class="pre">mjpg-streamer</span></code></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can check for directories in the terminal by typing in <code class="docutils literal"><span class="pre">ls</span></code></p>
</div>
</div>
<div class="section" id="getting-mjpgstreamer-s-dependencies">
<h2>Getting mjpgStreamer&#8217;s Dependencies<a class="headerlink" href="#getting-mjpgstreamer-s-dependencies" title="Permalink to this headline">¶</a></h2>
<p>Now we need mjpgStreamer&#8217;s dependancies to make it fully functional.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ sudo apt-get install libjpeg8-dev
$ sudo apt-get install imagemagick
</pre></div>
</div>
<p>After this is done, go into the mjpg-streamer directory inside the already existing mjpg-streamer.
<strong>Yes, type it twice</strong>.
And then type <code class="docutils literal"><span class="pre">make</span></code> which will build the system and compile it</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> mjpg-streamer
$ <span class="nb">cd</span> mjpg-streamer
$ make
</pre></div>
</div>
<p>In order to start the capture, we must make a temporary file that will save the image taken by raspistill, and then it will get updated many times every second.
So in <code class="docutils literal"><span class="pre">~/mjpg-streamer/mjpg-streamer</span> <span class="pre">$</span></code> type in:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ mkdir /tmp/stream
</pre></div>
</div>
<p>We can now initiate the stream by typing in</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>./ ./mjpg_streamer -i <span class="s2">&quot;input_file.so -f /tmp/stream -n pic.jpg&quot;</span> -o <span class="s2">&quot;output_http.so -w ./www&quot;</span>
</pre></div>
</div>
<p>Open a new terminal window and type</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ raspistill -w <span class="m">640</span> -h <span class="m">480</span> -q <span class="m">5</span> -o /tmp/stream/pic.jpg -tl <span class="m">1</span> -t <span class="m">9999999</span> -th 0:0:0
</pre></div>
</div>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">-w</span></code> and -h is resolution</li>
<li><code class="docutils literal"><span class="pre">-q</span></code> is quality</li>
<li><code class="docutils literal"><span class="pre">-o</span></code> is the Specified output filename</li>
<li><code class="docutils literal"><span class="pre">-tl</span></code> is the time interval between each snap shot (here is 1 millisecond)</li>
<li><code class="docutils literal"><span class="pre">-t</span></code> is the camera&#8217;s ON time in seconds, 9999999 is 115 Days</li>
<li><code class="docutils literal"><span class="pre">-th</span></code> Set thumbnail parameters (x:y:quality)</li>
</ul>
<p>Now, on your client computer, open your preferred browser and type in your <code class="docutils literal"><span class="pre">IP</span></code> and <code class="docutils literal"><span class="pre">port#</span></code> which will be 8080 by default.</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>x.x.x.x:8080
</pre></div>
</div>
<p>A website will display showing you the mjpgStreamer Demo Page and a congratulation message.
Go to the stream section in the menu to see the live footage from your Pi.</p>
<img src="video/mj.jpg"><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As you can see from the stream that the video quality is not that ground breaking but is acceptable, although a little worse than the VLC method, however the latency is a so much better than in the VLC method.</p>
</div>
</div>
<div class="section" id="video-demonstration">
<h2>Video Demonstration<a class="headerlink" href="#video-demonstration" title="Permalink to this headline">¶</a></h2>
<iframe src="http://www.youtube.com/embed/qyzUSeduGew" style="border: 0; height: 345px; width: 560px">
</iframe><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Monitor on the left displays real time from the Raspberry directly, whereas the Laptop is displaying the mjpgSteamer stream.</p>
</div>
<p>Raspberry Pi Camera Stream Web Video.
This video tutorial shows the overview of this written tutorial.</p>
<iframe src="http://www.youtube.com/embed/TgUQCSk3nUE" style="border: 0; height: 345px; width: 560px">
</iframe></div>
<div class="section" id="end-2">
<h2>END 2<a class="headerlink" href="#end-2" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../dronemap/index.html" class="btn btn-neutral float-right" title="Dronemap Planner" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="video-streaming-gstreamer.html" class="btn btn-neutral" title="Video Streaming with RapsberryPI Using gStreamer" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Gaitech.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54522619-2', 'auto');
  ga('send', 'pageview');

</script>


</body>
</html>