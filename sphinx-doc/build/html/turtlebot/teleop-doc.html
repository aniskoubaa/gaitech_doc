

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Keyboard Teleop &mdash; Gaitech EDU 2.5 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/gaitech32.jpg"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Gaitech EDU 2.5 documentation" href="../index.html"/>
        <link rel="up" title="Turtlebot Quick Start Tutorials" href="turtlebot-tutorials.html"/>
        <link rel="next" title="Turtlebot Simulators" href="turtlebot-simulators.html"/>
        <link rel="prev" title="Network Configuration" href="network-config-doc.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Gaitech EDU
          

          
            
            <img src="../_static/gaitechlogo150.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                2.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/get-started.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ros/ros-tutorials.html">ROS Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roslink/index.html">ROSLink</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="turtlebot-tutorials.html">Turtlebot Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="turtlebot-first-tests.html">First Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="network-config-doc.html">Network Configuration</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Keyboard Teleop</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#code-explanation">Code Explanation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#video-demonstration">Video Demonstration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#questions">Questions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="turtlebot-simulators.html">Turtlebot Simulators</a></li>
<li class="toctree-l2"><a class="reference internal" href="speech-doc.html">Voice Teleoperation</a></li>
<li class="toctree-l2"><a class="reference internal" href="openKinect-turtlebot.html">Setting-up 3D Sensor for the Turtlebot</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-map-kenict.html">Building a Map with a Turtlebot</a></li>
<li class="toctree-l2"><a class="reference internal" href="map-navigation.html">Map Navigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="free-space-navigation.html">Turtlebot free movement in Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="turtlebot-arm-pincher.html">Turtlebot Arm PhantomX Pincher with ROS</a></li>
<li class="toctree-l2"><a class="reference internal" href="turtlebot-arm-arduino.html">Controlling a Turtlebot Arm with an Arduino Board using RFID</a></li>
<li class="toctree-l2"><a class="reference internal" href="hokuyo-turtlebot.html">Adding Hokuyo Laser Range Finder to Turtlebot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../drones/index.html">Drones Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gapter/index.html">Gapter Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../video/index.html">Video Streaming Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dronemap/index.html">Dronemap Planner</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributors/index.html">Contributors</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Gaitech EDU</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="turtlebot-tutorials.html">Turtlebot Quick Start Tutorials</a> &raquo;</li>
      
    <li>Keyboard Teleop</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/turtlebot/teleop-doc.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="keyboard-teleop">
<span id="teleop-doc"></span><h1>Keyboard Teleop<a class="headerlink" href="#keyboard-teleop" title="Permalink to this headline">¶</a></h1>
<p>This tutorial will introduce to you how to control your turtlebot robot using ssh or across the wireless communication with your keyboard.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure that you completed installing all the required packets in the previous tutorials and your network is working fine between the ROS Master node and the Host node.</p>
</div>
<p>On the Master node (the turtulebot PC) run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>roslaunch turtlebot_bringup minimal.launch
</pre></div>
</div>
<p>On your workspace PC (the host node) run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>roslaunch turtlebot_teleop keyboard_teleop.launch
</pre></div>
</div>
<p>You can move your turtlebot robot according to the instructions below:</p>
<img alt="../_images/teleop_img.png" class="align-center" src="../_images/teleop_img.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure that your turtlebot robot is on a flat surface and on a safe distance from an edge.</p>
</div>
<div class="section" id="code-explanation">
<h2>Code Explanation<a class="headerlink" href="#code-explanation" title="Permalink to this headline">¶</a></h2>
<p>The source code of the keyboard teleop could be found in <code class="docutils literal"><span class="pre">src/tutlebot/keyboard_teleop</span></code> folder of the <a class="reference external" href="https://github.com/aniskoubaa/gaitech_edu">gaitech_edu</a> package.
Note that by default the keyboard teleop application is in the folder <code class="docutils literal"><span class="pre">/opt/ros/indigo/share/turtlebot_teleop</span></code> of the ROS distribution.
We explain the following script of the <code class="docutils literal"><span class="pre">keyboard_teleop.launch</span></code> file:</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span> <span class="nt">&lt;launch&gt;</span>
  <span class="c">&lt;!-- turtlebot_teleop_key already has its own built in velocity smoother --&gt;</span>
   <span class="nt">&lt;node</span> <span class="na">pkg=</span><span class="s">&quot;turtlebot_teleop&quot;</span> <span class="na">type=</span><span class="s">&quot;turtlebot_teleop_key&quot;</span> <span class="na">name=</span><span class="s">&quot;turtlebot_teleop_keyboard&quot;</span>  <span class="na">output=</span><span class="s">&quot;screen&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;scale_linear&quot;</span> <span class="na">value=</span><span class="s">&quot;0.5&quot;</span> <span class="na">type=</span><span class="s">&quot;double&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;param</span> <span class="na">name=</span><span class="s">&quot;scale_angular&quot;</span> <span class="na">value=</span><span class="s">&quot;1.5&quot;</span> <span class="na">type=</span><span class="s">&quot;double&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;remap</span> <span class="na">from=</span><span class="s">&quot;turtlebot_teleop_keyboard/cmd_vel&quot;</span> <span class="na">to=</span><span class="s">&quot;cmd_vel_mux/input/teleop&quot;</span><span class="nt">/&gt;</span>
   <span class="nt">&lt;/node&gt;</span>
<span class="nt">&lt;/launch&gt;</span>
</pre></div>
</div>
<p>The launch file runs the ROS node <code class="docutils literal"><span class="pre">turtlebot_teleop_key</span></code> of the package <code class="docutils literal"><span class="pre">turtlebot_teleop</span></code>.
Notice that the keyboard teleop node takes two parameters(<code class="docutils literal"><span class="pre">scale_linear</span></code> and <code class="docutils literal"><span class="pre">scale_angular</span></code>)
and they are used to determine the scale of the linear and angular speed of the turtlebot.
It is very important to keep the speed very small when you are testing.
However, you can change the speed value as much as you like, depending on the ground type.</p>
<p>The command <code class="docutils literal"><span class="pre">&lt;remap</span> <span class="pre">from=&quot;turtlebot_teleop_keyboard/cmd_vel&quot;</span> <span class="pre">to=&quot;cmd_vel_mux/input/teleop&quot;/&gt;</span></code> remap the topic of the velocity command to <code class="docutils literal"><span class="pre">cmd_vel_mux/input/teleop</span></code>, which is the topic that the turtlebot uses to receive velocity commands.
In fact, in the <code class="docutils literal"><span class="pre">turtlebot_teleop_key</span></code> the programmers used the topic <code class="docutils literal"><span class="pre">turtlebot_teleop_keyboard/cmd_vel</span></code> to publish velocity commands, but the turtlebot uses the <code class="docutils literal"><span class="pre">cmd_vel_mux/input/teleop</span></code> topic to receive velocity commands.
The <code class="docutils literal"><span class="pre">remap</span></code> command allows to change the definition of the <code class="docutils literal"><span class="pre">turtlebot_teleop_keyboard/cmd_vel</span></code> to the topic defined in the turtlebot robot.
Without the remap the keyboard teleopartion will not work as the topic used for publishing velocity commands will be different from the one used to receive them in the robot.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You can either control a real turtlebot or a simulated turtlebot (in Stage or Gazebo) using the keyboard teleoperation.
If for some reason it does not work, make sure to correctly map the ROS topic over which the robot receives velocity commands.</p>
</div>
</div>
<div class="section" id="video-demonstration">
<h2>Video Demonstration<a class="headerlink" href="#video-demonstration" title="Permalink to this headline">¶</a></h2>
<p>You can watch an illustration of keyboard teleoperation of the turtlebot in this video</p>
<iframe width="640" height="360" src="http://www.youtube.com/embed/pjq-vThdWjw" frameborder="0" allowfullscreen="1">&nbsp;</iframe></div>
<div class="section" id="questions">
<h2>Questions<a class="headerlink" href="#questions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Read the code of <code class="docutils literal"><span class="pre">keyboad_teleop.cpp</span></code> and <code class="docutils literal"><span class="pre">keyboad_teleop.py</span></code>.  What is the topic used to publish velocity commands to the robot? What the line of code that does that?</li>
<li>What is the topic that the turtlebot uses to receive velocity commands? How can you find this information?</li>
<li>What is the technique used to link the topic of the velocity command published by the keyboard teleop node and the velocity command topic received by the robot?</li>
<li>What is the role of <code class="docutils literal"><span class="pre">scale_linear</span></code> and <code class="docutils literal"><span class="pre">scale_angular</span></code>. Explain.</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="turtlebot-simulators.html" class="btn btn-neutral float-right" title="Turtlebot Simulators" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="network-config-doc.html" class="btn btn-neutral" title="Network Configuration" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Gaitech.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54522619-2', 'auto');
  ga('send', 'pageview');

</script>


</body>
</html>