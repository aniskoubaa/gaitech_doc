

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Turtlebot Simulators &mdash; Gaitech EDU 2.5 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/gaitech32.jpg"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Gaitech EDU 2.5 documentation" href="../index.html"/>
        <link rel="up" title="Turtlebot Quick Start Tutorials" href="turtlebot-tutorials.html"/>
        <link rel="next" title="Turtlebot Voice Teleoperation" href="speech-doc.html"/>
        <link rel="prev" title="Keyboard Teleop" href="teleop-doc.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Gaitech EDU
          

          
            
            <img src="../_static/gaitechlogo150.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                2.5
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/get-started.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ros/ros-tutorials.html">ROS Quick Start</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="turtlebot-tutorials.html">Turtlebot Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="turtlebot-first-tests.html">First Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="network-config-doc.html">Network Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="teleop-doc.html">Keyboard Teleop</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Turtlebot Simulators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#stage-simulator">Stage Simulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gazebo-simulator">Gazebo Simulator</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-teleop-package-with-gazebo-and-rviz">Using Teleop package with Gazebo and RViz</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="speech-doc.html">Voice Teleoperation</a></li>
<li class="toctree-l2"><a class="reference internal" href="openKinect-turtlebot.html">Setting-up 3D Sensor for the Turtlebot</a></li>
<li class="toctree-l2"><a class="reference internal" href="create-map-kenict.html">Building a Map with a Turtlebot</a></li>
<li class="toctree-l2"><a class="reference internal" href="map-navigation.html">Map Navigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="free-space-navigation.html">Turtlebot free movement in Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="turtlebot-arm-pincher.html">Turtlebot Arm PhantomX Pincher with ROS</a></li>
<li class="toctree-l2"><a class="reference internal" href="turtlebot-arm-arduino.html">Controlling a Turtlebot Arm with an Arduino Board using RFID</a></li>
<li class="toctree-l2"><a class="reference internal" href="hokuyo-turtlebot.html">Adding Hokuyo Laser Range Finder to Turtlebot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../drones/index.html">Drones Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gapter/index.html">Gapter Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributors/index.html">Contributors</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Gaitech EDU</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="turtlebot-tutorials.html">Turtlebot Quick Start Tutorials</a> &raquo;</li>
      
    <li>Turtlebot Simulators</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/turtlebot/turtlebot-simulators.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="turtlebot-simulators">
<span id="id1"></span><h1>Turtlebot Simulators<a class="headerlink" href="#turtlebot-simulators" title="Permalink to this headline">¶</a></h1>
<p>In this page, we will learn about two different simulators to test your Turtlebot robot programs.</p>
<p>You need to install the software:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>sudo apt-get install ros-indigo-turtlebot-simulator
</pre></div>
</div>
<p>There is a couple of simulators that you can help you with your robot such as Gazebo, Stage, RViz and Stdr. The most used simulators are the Gazebo and the Stage.</p>
<div class="section" id="stage-simulator">
<h2>Stage Simulator<a class="headerlink" href="#stage-simulator" title="Permalink to this headline">¶</a></h2>
<p>In this section you will learn about:</p>
<blockquote>
<div><ul class="simple">
<li>Stage Simulator and how to launch it.</li>
<li>Customizing your simulator.</li>
</ul>
</div></blockquote>
<p>Stage is a 2D multi-robot simulator. It shows the user a world defined in a file with an extention <cite>.world</cite>. This world has everything the software needs to know from the obstacles, free space to robots and other objects.</p>
<p>Run the following command to run the Stage simulator:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>roslaunch turtlebot_stage turtlebot_in_stage.launch
</pre></div>
</div>
<img alt="../_images/stage_rviz.png" class="align-center" src="../_images/stage_rviz.png" />
<p>Click on the <cite>2D Nav Goal</cite> option on the top bar and command the robot to go anywhere you want in the map.</p>
<p>The following picture is after you choose a position for the robot to go.</p>
<img alt="../_images/stage_rviz_moving.png" class="align-center" src="../_images/stage_rviz_moving.png" />
<p>Open the turtlebot_stage directory and type</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>tree
</pre></div>
</div>
<p>to be able to see all the files but we are intersted in the following files:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">launch</span><span class="o">/</span><span class="n">turtlebot_in_stage</span><span class="o">.</span><span class="n">launch</span>
<span class="n">maps</span><span class="o">/</span><span class="n">maze</span><span class="o">.</span><span class="n">png</span>
<span class="n">maps</span><span class="o">/</span><span class="n">maze</span><span class="o">.</span><span class="n">yaml</span>
<span class="n">maps</span><span class="o">/</span><span class="n">stage</span><span class="o">/</span><span class="n">maze</span><span class="o">.</span><span class="n">world</span>
<span class="n">maps</span><span class="o">/</span><span class="n">stage</span><span class="o">/</span><span class="n">turtlebot</span><span class="o">.</span><span class="n">inc</span>
<span class="n">rviz</span><span class="o">/</span><span class="n">robot_navigation</span><span class="o">.</span><span class="n">rviz</span>
</pre></div>
</div>
<p>The <cite>.rviz</cite> file has all the settings for the RViz simulator so you don&#8217;t need to worry about it. The <code class="docutils literal"><span class="pre">turtlebot.inc</span></code> file defines the layout and the sensor for the turtlebot robot.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure to keep a copy of the original files in case you did something wrong specially the <code class="docutils literal"><span class="pre">.png</span></code> <code class="docutils literal"><span class="pre">.yaml</span></code> <code class="docutils literal"><span class="pre">.world</span></code> files.</p>
</div>
<p>In order to edit the map you want to have, open the file <code class="docutils literal"><span class="pre">maze.png</span></code> with any editor and modify it.</p>
<p>Now you can run the simulator:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>roslaunch turtlebot_stage turtlebot_in_stage.launch
</pre></div>
</div>
<p>You can also choose the <code class="docutils literal"><span class="pre">.world</span></code> and <code class="docutils literal"><span class="pre">.yaml</span></code> files by using the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>roslaunch turtlebot_stage turtlebot_in_stage.launch map_file:<span class="o">=</span><span class="s2">&quot;~/path/to/new/file.yaml&quot;</span> world_file:<span class="o">=</span><span class="s2">&quot;~/path/to/new/file.world&quot;</span>
</pre></div>
</div>
<p>Or in case you want to use the same files everytime you can run the following commands:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TURTLEBOT_STAGE_MAP_FILE</span><span class="o">=</span>~/path/to/new/file.yaml
<span class="nb">export</span> <span class="nv">TURTLEBOT_STAGE_WORLD_FILE</span><span class="o">=</span>~/path/to/new/file.world
</pre></div>
</div>
<p>or simply add them to your shell setup file:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="nb">export</span> <span class="nv">TURTLEBOT_STAGE_MAP_FILE</span><span class="o">=</span>~/path/to/new/file.yaml &gt;&gt; devel/setup.sh
<span class="nb">echo</span> <span class="nb">export</span> <span class="nv">TURTLEBOT_STAGE_WORLD_FILE</span><span class="o">=</span>~/path/to/new/file.world &gt;&gt; devel/setup.sh
</pre></div>
</div>
<p>After you modify the map you may find out that the position of your robot is very close to an obstacle for example. Instead of moving the robot from the obstacle you can simply change the default position of the robot in the <code class="docutils literal"><span class="pre">.world</span></code> file by changing the values of the <cite>pose [x y z theta]</cite></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><cite>theta</cite> is in degree.</p>
</div>
<p>or you can change tho position when you launch the simulator:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>roslaunch turtlebot_stage turtlebot_in_stage.launch initial_pose_y:<span class="o">=</span>2.0 initial_pose_x:<span class="o">=</span>1.0
</pre></div>
</div>
<p>You can also add an obstacle in any position in the map and with any size you like by creating a new <code class="docutils literal"><span class="pre">.inc</span></code> file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">define</span> <span class="n">block</span> <span class="n">model</span>
<span class="p">(</span>
 <span class="n">size</span> <span class="p">[</span><span class="mf">0.5</span> <span class="mf">0.5</span> <span class="mf">1.0</span><span class="p">]</span>
 <span class="n">gui_nose</span> <span class="mi">0</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">size</span></code> parameters are in meters and the <cite>gui_nose</cite> parameter is to show the direction which the obstacle is facing. Make sure to include the <code class="docutils literal"><span class="pre">.inc</span></code> you just created for the block in the <code class="docutils literal"><span class="pre">.world</span></code> file on the top and then you can specify other details for the block:</p>
<p>In the <code class="docutils literal"><span class="pre">.world</span></code> file:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">include</span> <span class="s2">&quot;blockFile.inc&quot;</span>

<span class="c1">#add blocks and customize them</span>
<span class="n">block</span><span class="p">(</span> <span class="n">pose</span> <span class="p">[</span> <span class="mf">2.0</span> <span class="mf">1.0</span> <span class="mf">1.0</span> <span class="mf">45.0</span> <span class="p">]</span> <span class="n">color</span> <span class="s2">&quot;red&quot;</span><span class="p">)</span>
<span class="n">block</span><span class="p">(</span> <span class="n">pose</span> <span class="p">[</span> <span class="mf">1.0</span> <span class="mf">2.0</span> <span class="mf">2.0</span> <span class="mf">0.0</span> <span class="p">]</span> <span class="n">color</span> <span class="s2">&quot;black&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>For more details about <code class="docutils literal"><span class="pre">Stage</span></code> on ROS, please refer to the <a class="reference external" href="http://wiki.ros.org/stage">Stage</a> wiki page.</li>
<li>You can add default customization for the block inside the <code class="docutils literal"><span class="pre">.inc</span></code> file. You can refer to this <a class="reference external" href="http:playerstage.sourceforge.net/doc/stage-cvs/group__model.html">page</a> for more customization. Make sure if you changed anything in the <code class="docutils literal"><span class="pre">.yaml</span></code> file to adjust the <code class="docutils literal"><span class="pre">.world</span></code> file.</li>
</ul>
</div>
</div>
<div class="section" id="gazebo-simulator">
<h2>Gazebo Simulator<a class="headerlink" href="#gazebo-simulator" title="Permalink to this headline">¶</a></h2>
<p>In this section we will bring up the turtlebot robot in the <cite>Gazebo</cite> simulator.</p>
<p>To run the <cite>Gazebo</cite> simulator run the following command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>roslaunch turtlebot_gazebo turtlebot_world.launch
</pre></div>
</div>
<img alt="../_images/gazebo.png" class="align-center" src="../_images/gazebo.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>For more details about <code class="docutils literal"><span class="pre">Gazebo</span></code> on ROS, please refer to the <a class="reference external" href="http://gazebosim.org/">Gazebo</a> official page.</li>
<li>Gazebo may need a couple of updates before running to update its database and it will take a few moments.</li>
</ul>
</div>
</div>
<div class="section" id="using-teleop-package-with-gazebo-and-rviz">
<h2>Using Teleop package with Gazebo and RViz<a class="headerlink" href="#using-teleop-package-with-gazebo-and-rviz" title="Permalink to this headline">¶</a></h2>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Try to finish the teleop tutorial before you complete this tutorial to make sure you have all the necessary packages.</p>
</div>
<p>First, you need to bring up the <cite>Gazebo</cite> simulator as mentioned before. Second, open a new terminal and type the following:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>roslaunch turtlebot_teleop keyboard_teleop.launch
</pre></div>
</div>
<p>Try to move the robot around.</p>
<img alt="../_images/gazebo_moving.png" class="align-center" src="../_images/gazebo_moving.png" />
<p>Now to be able to see what the robot is acually sees you can open a new terminal and launch the RViz simulator:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>roslaunch turtlebot_rviz_launchers view_robot.launch
</pre></div>
</div>
<img alt="../_images/gazebo_rviz.png" class="align-center" src="../_images/gazebo_rviz.png" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The RViz simulator may take a couple of minutes to be launched. Make sure you have a powerful PC with a good graphics card.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="speech-doc.html" class="btn btn-neutral float-right" title="Turtlebot Voice Teleoperation" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="teleop-doc.html" class="btn btn-neutral" title="Keyboard Teleop" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Gaitech.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.5',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54522619-2', 'auto');
  ga('send', 'pageview');

</script>


</body>
</html>